<footer class="footer">
  <p>&copy; {{ now.Year }} <a href="{{ `` | absURL }}">{{ site.Title }}</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</p>
  <p>
  <a href="https://github.com/mipmip/quiqr-paper-themed-template" rel="noopener" target="_blank">Paper</a>
  </p>
</footer>

<script>
  function setLatestVersion(url, id, linktext, href_postfix){

    var element = document.getElementById(id);
    if(element){
      fetch(url)
        .then(res => res.text())
        .then(text => {
          const version = text.split('\n')[0].split(": ")[1];
          element.innerHTML = `${linktext} v${version}`;
          element.setAttribute('href', "https://quiqr-desktop-releases.s3.eu-west-1.amazonaws.com/quiqr_" + version + href_postfix);
        })
        .catch(err => console.error(err));
    }
  }
  window.addEventListener("DOMContentLoaded", (event) => {
    var url_win = "https://quiqr-desktop-releases.s3.eu-west-1.amazonaws.com/latest.yml";
    var url_linux = "https://quiqr-desktop-releases.s3.eu-west-1.amazonaws.com/latest-linux.yml";
    var url_mac = "https://quiqr-desktop-releases.s3.eu-west-1.amazonaws.com/latest-mac.yml";
    setLatestVersion(url_mac, 'latest-mac-link' ,  "Quiqr Desktop for macOS", "_mac_x64.dmg");
    setLatestVersion(url_linux, 'latest-linux-link' ,  "Quiqr Desktop for Linux as AppImage", "_linux_x86_64.AppImage");
    setLatestVersion(url_win, 'latest-windows-link' ,  "Quiqr Desktop for Windows", "_win.exe");
  });
</script>
